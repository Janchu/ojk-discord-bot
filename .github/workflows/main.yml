name: Test
on:
  push:
    branches:
      - actions-testing
jobs:
  deploy:
    runs-on: self-hosted
    steps:
    - uses: actions/checkout@v2
    - uses: actions/setup-node@v1
    - name: Test
      run: |
        echo Installing dependencies...
        npm install
        echo Building...
        npm run build
        echo Deploying...
        cd ojk-discord-bot && cd ojk-discord-bot && pm2 start "npm run prod" -i 0 --name "ojk-discord-bot"
